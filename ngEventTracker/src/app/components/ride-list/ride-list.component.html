<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<div class="card">
  <div>
        <h2 class="card-header text-center font-weight-bold py-3">Ride Tracker</h2>
      </div>
      <div>
      </div>
      <div class="card-body">
        <div class='col-lg-12'>
          <!-- <i id='add' class="float-center text-success material-icons" (click)="showAddRide()" ngbTooltip="Add">add</i> -->
          <span style='text-align: center' *ngIf='mode === "summary"'><h4>Rides</h4>
          <button class='btn btn-outline-success' style='display: block; margin: auto' (click)='showAddRide()' >Add a Ride...</button>
          </span>
        </div>
      <div id="table" class="table-editable table-striped">
        <table class="table table-striped" *ngIf='mode === "summary"'>
              <!-- <mdb-icon fas icon="plus" size="2x"></mdb-icon> -->
          <tr *ngFor="let ride of rides">
            <td>
            <i class="material-icons" (click)="displayRide(ride)" ngbTooltip="Details">visibility</i>
          </td>
          <td>
            <span contenteditable="False" style="text-align: center"><b>{{ride.name}}</b><br></span><span style="text-align: center">{{ ride.address.city}}, {{ ride.address.state}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.rideDate}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.distance}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.duration}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.avgHr}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.avgPwr}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.bike}}</span>
          </td>
          <td>
            <span contenteditable="true">{{ride.rating}}</span>
          </td>
          <td (click)='setEditRide(ride)'>
            <span><i class="material-icons" ngbTooltip="Edit">edit</i>
          </span>
          <td>
            <span class="table-remove">
              <i class="material-icons" (click)="destroy(ride.id)" ngbTooltip="Delete">delete</i>
            </span>
          </td>
        </tr>
      </table>
      <div id="table"  *ngIf='mode === "details"'>
          <table class="table table-striped">
                <!-- <mdb-icon fas icon="plus" size="2x"></mdb-icon> -->
            <tr>
              <td>
              <i class="material-icons" (click)="displayTable()" data-md-tooltip="Tooltip content" ngbTooltip="To List">visibility_off</i>
            </td>
            <td>
              <span contenteditable="False" style="text-align: center"><b>{{selected.name}}</b><br></span><span style="text-align: center">{{ selected.address.city}}, {{ selected.address.state}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.rideDate}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.distance}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.duration}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.avgHr}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.avgPwr}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.bike}}</span>
            </td>
            <td>
              <span contenteditable="true">{{selected.rating}}</span>
            </td>
            <td (click)='setEditRide(selected)'>
              <span><i class="material-icons" ngbTooltip="Edit">edit</i>
            </span>
            </td>
            <td>
              <span class="table-remove">
                <i class="material-icons" (click)="destroy(selected.id)" ngbTooltip="Delete">delete</i>
              </span>
            </td>
          </tr>
          <tr><td></td>
            <td colspan="10">
            <span style="text-align: left"><b>Description: </b>{{ selected.description }}<br></span>
              <span style="text-align: left"><b>Comments: </b>{{ selected.comments }}<br></span>
              <span style="text-align: left"><b>Start Location: </b>{{ selected.address.address }} {{ selected.address.address2 }},
                {{ selected.address.city }}, {{ selected.address.state }} {{ selected.address.zipcode }}</span><br>
                <span><a href="{{ selected.activityUrl }}">Activity</a> | <a href="{{ selected.courseUrl }}"> Course</a><br></span>
            </td>
            </tr>
            </table>
      </div>
        <div *ngIf='mode === "add"'>
              <h2>Add a Ride...</h2>
              <table style="max-width:500px; content: center">
              <tr>
              <td>
                  <form name='rideAdd' id='rideAdd'>
                  <input type='text' name='name' placeholder='Ride name...' />
                  <input type='date' name='rideDate' placeholder='Ride date...' /><br>
                  <input type='text' name='description' placeholder='Description...' style="width: 98%;"/><br>
                  <input type='text' name='bike' placeholder='Bike...' />
                  <input type='number' name='distance' placeholder='Distance, e.g. 45.35' />
                  <input type='number' name='duration' placeholder='Duration in seconds...' />
                  <input type='number' name='calories' placeholder='Calories burned...' /><br>
                  <input type='number' name='avgPwr' placeholder='Average power...' />
                  <input type='number' name='avgHr' placeholder='Average heartrate...' /><br>
                  <input type='text' name='courseUrl' placeholder='Course URL...' style="width: 98%;"/><br>
                  <input type='text' name='activityUrl' placeholder='Activity URL...' style="width: 98%;"/><br>
                  <input type='text' name='comments' placeholder='Comments...' style="width: 98%;"/><br>
                  <input type='number' name='rating' placeholder='Rating: 1 - 5...' /><br>
                  <input type='text' name='address' placeholder='123 The Street' />
                  <input type='text' name='address2' placeholder='Apt...' /><br>
                  <input type='text' name='city' placeholder='City' />
                  <input type='text' name='state' placeholder='State' />
                  <input type='text' name='zipcode' placeholder='Zipcode' /><br><br>
                  <input type='submit' name='submit' value='Submit' class='btn btn-success'/><br><hr>
                  <button class='btn btn-danger' (click)='mode = "summary"'>Cancel</button><br><hr>
                </form>
              </td>
            </tr>
          </table>
        </div>
        <div *ngIf='mode === "edit"' id="table" class="container">
            <form id='editRide' name='editRide'>
              <div class='form-group'>
                <h4 class="card-header text-center font-weight-bold py-3">{{ editRide.name }}</h4>
              <table style="max-width: 600px; display: block; margin: auto">
                <tr>
                  <td><label for="name"> Id: </label><input class='form-control' type='number' name='rideid' [(ngModel)]="editRide.id" /></td>
                  <td><label for="name"> Date: </label><input class='form-control' type='date' name='rideDate' placeholder='Ride date...' [(ngModel)]="editRide.rideDate" /></td>
                  <td><label for="name"> Rating: </label><input class='form-control' type='number' name='rating' placeholder='Rating: 1 - 5...' [(ngModel)]="editRide.rating" /></td>
                </tr>
                <tr>
                <td colspan='3'><label for="name"> Name: </label><input class='form-control' type='text' name='name' placeholder='Ride name...' [(ngModel)]="editRide.name" /></td>
              </tr>
              <tr>
                <td><label for="name">Bike: </label><input class='form-control' type='text' name='bike' placeholder='Bike...' [(ngModel)]="editRide.bike" /></td>
                <td><label for="name">Distance: </label><input class='form-control' type='number' name='distance' placeholder='Distance, e.g. 45.35' [(ngModel)]="editRide.distance" /></td>
                <td><label for="name">Duration: </label><input class='form-control' type='number' name='duration' placeholder='Duration in seconds...' [(ngModel)]="editRide.duration" /></td>
              </tr>
              <tr>
                <td><label for="name">Calories:</label><input class='form-control' type='number' name='calories' placeholder='Calories burned...' [(ngModel)]="editRide.calories" /></td>
                <td><label for="name">Avg Power:</label><input class='form-control' type='number' name='avgPwr' placeholder='Average power...' [(ngModel)]="editRide.avgPwr" /></td>
                <td><label for="name">Avg Heart Rate:</label><input class='form-control' type='number' name='avgHr' placeholder='Average heartrate...' [(ngModel)]="editRide.avgHr" /></td>
                </tr>
                <tr>
                    <td colspan='2'><label for="name">Address:</label><input class='form-control' type='text' name='address' placeholder='123 The Street' [(ngModel)]="editRide.address.address" /></td>
                </tr>
                  <tr>
                    <td colspan='2'><label for="name">Apt:</label><input class='form-control' type='text' name='address2' placeholder='Apt...' [(ngModel)]="editRide.address.address2" /></td>
                  </tr>
                  <tr>
                    <td><label for="name">City:</label><input class='form-control' type='text' name='city' placeholder='City' [(ngModel)]="editRide.address.city" /></td>
                    <td><label for="name">State:</label><input class='form-control' type='text' name='state' placeholder='State' [(ngModel)]="editRide.address.state" /></td>
                    <td><label for="name">Zip:</label><input class='form-control' type='text' name='zipcode' placeholder='Zipcode' [(ngModel)]="editRide.address.zipcode" /></td>
                  </tr>
                    <tr><td colspan='3'><label for="name">Description</label><input class='form-control' type='text' name='description' placeholder='Description...' [(ngModel)]="editRide.description" /></td></tr>
                    <tr><td colspan='3'><label for="name">Comments: </label><input class='form-control' type='text' name='comments' placeholder='Comments...' [(ngModel)]="editRide.comments" /></td></tr>
                    <tr><td colspan='3'><label for="name">Course: </label><input class='form-control' type='text' name='courseUrl' placeholder='Course URL...' [(ngModel)]="editRide.courseUrl" /></td></tr>
                    <tr><td colspan='3'><label for="name">Activity: </label><input class='form-control' type='text' name='activityUrl' placeholder='Activity URL...' [(ngModel)]="editRide.activityUrl" /></td></tr>
                    <hr>
                    <div class='wrapper'>
                    <div style='display: inline-block'>
                    <input type='submit' name='submit' value='Save' (click)='updateRide(editRide)' class='btn btn-primary' />
                    <button name="rideDelete" (click)='destroy(editRide.id)'class='btn btn-danger'>Delete Ride</button>
                    <button class='btn btn-warning' (click)='mode = "summary"'>Cancel</button>
                    </div>
                  </div>
                  </table>
                </div>
              </form>
            </div>
          </div>

      </div>
    </div>
